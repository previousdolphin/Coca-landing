<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NOTICE OF PASSING | CoCA</title>
    <meta name="theme-color" content="#000000">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <style>
        /* Typography Imports */
        @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Playfair+Display:wght@400;900&display=swap');

        :root {
            --coca-red: #F40009;
            --void: #000000;
            --text: #E5E5E5;
            --border: #333333;
        }

        html {
            height: 100%;
            background-color: var(--void);
            /* Prevent elastic scrolling/bounce on Safari */
            overscroll-behavior-y: none;
            -webkit-text-size-adjust: 100%;
        }

        body {
            background-color: transparent; /* Let canvas show through */
            color: var(--text);
            font-family: 'Space Mono', monospace;
            /* Use 100% to avoid scrollbar width issues causing horizontal wiggle */
            width: 100%; 
            /* Use dynamic viewport height for mobile browsers */
            min-height: 100dvh; 
            overflow-x: hidden;
            position: relative;
            margin: 0;
        }

        /* The Serif Headline Font - Upright and Bold */
        .font-funeral {
            font-family: 'Playfair Display', serif;
            font-weight: 900; 
            font-style: normal;
            line-height: 0.8;
            letter-spacing: -0.04em;
        }

        /* Scanline Overlay */
        .scanlines {
            background: repeating-linear-gradient(
                to bottom,
                transparent 0%,
                rgba(255, 255, 255, 0.02) 0.5%,
                transparent 1%
            );
            background-size: 100% 4px;
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 40;
            /* Ensure it stays fixed even if content scrolls */
            height: 100vh;
            width: 100vw;
        }

        /* WebGL Canvas - Strictly Fixed */
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
            opacity: 0.3;
            pointer-events: none; /* Pass touches through to content */
        }

        /* Blur Overlay */
        .glass-overlay {
            position: fixed;
            inset: 0;
            backdrop-filter: blur(12px) grayscale(100%);
            -webkit-backdrop-filter: blur(12px) grayscale(100%); /* Safari support */
            z-index: 1;
            pointer-events: none;
        }

        /* Content Layer */
        .content-layer {
            position: relative;
            z-index: 50;
        }

        /* Logo Crop Wrapper */
        .logo-crop {
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Glitch Effect */
        .glitch-text:hover {
            color: var(--coca-red);
            text-shadow: 2px 0px 0px rgba(255, 255, 255, 0.5);
            cursor: help;
        }

        /* Animations */
        @keyframes pulse-slow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse-slow {
            animation: pulse-slow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

    </style>
</head>
<body class="flex flex-col">

    <!-- BACKGROUND SYSTEM -->
    <div id="canvas-container"></div>
    <div class="glass-overlay"></div>
    <div class="scanlines"></div>

    <!-- MAIN WRAPPER -->
    <!-- Added min-h-[100dvh] to ensure full height on mobile with address bars -->
    <div class="content-layer w-full max-w-screen-xl mx-auto flex flex-col justify-between min-h-[100dvh] p-6 md:p-8 gap-8">

        <!-- HEADER -->
        <header class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 shrink-0">
            <!-- Logo Section -->
<a href="https://www.cocausa.org" aria-label="Go to CoCA homepage">
  <div class="w-20 md:w-32 logo-crop h-12 md:h-16 relative cursor-pointer">
      <img 
          src="CoCA-Vector-redrawn-photoshop.svg" 
          alt="CoCA" 
          class="w-full h-full object-contain filter invert scale-150 transform transition-transform duration-500 hover:scale-125"
          onerror="this.style.display='none'; document.getElementById('logo-fallback').style.display='block';"
      >
      <span id="logo-fallback" class="hidden font-serif italic font-black text-2xl text-[var(--coca-red)] absolute top-0 left-0">CoCA</span>
  </div>
</a>

            <div class="text-left md:text-right text-[10px] md:text-xs text-gray-500 font-mono leading-tight w-full md:w-auto border-t md:border-t-0 border-[#333] pt-2 md:pt-0">
                <p>DEPT. OF FINAL AFFAIRS</p>
                <p>CASE FILE: #00-COPY-END</p>
                <p class="text-[var(--coca-red)] font-bold animate-pulse-slow">STATUS: TERMINAL</p>
            </div>
        </header>

        <!-- CENTER CONTENT -->
        <main class="flex-grow flex flex-col items-center justify-center text-center w-full relative z-50 py-4 shrink-0">
            
            <!-- Intro text -->
            <p class="text-[10px] md:text-xs tracking-[0.3em] text-gray-500 mb-6 uppercase font-mono">
                Scheduled for Termination
            </p>

            <!-- Headline -->
            <h1 class="font-funeral text-white mix-blend-difference mb-8 md:mb-12 relative z-10 flex flex-col items-center leading-none">
                <span class="block text-[14vw] md:text-[8vw] lg:text-[7vw]">NOTICE OF</span>
                <span class="block text-[14vw] md:text-[8vw] lg:text-[7vw] text-gray-400">PASSING</span>
            </h1>

            <!-- Info Card -->
            <div class="w-full max-w-md md:max-w-lg border-y border-[#333] md:border md:border-white/10 bg-black/40 backdrop-blur-md p-6 text-left relative shadow-2xl">
                
                <!-- Corner Accents (Desktop only) -->
                <div class="absolute top-0 left-0 w-2 h-2 border-t border-l border-white/50 hidden md:block"></div>
                <div class="absolute top-0 right-0 w-2 h-2 border-t border-r border-white/50 hidden md:block"></div>
                <div class="absolute bottom-0 left-0 w-2 h-2 border-b border-l border-white/50 hidden md:block"></div>
                <div class="absolute bottom-0 right-0 w-2 h-2 border-b border-r border-white/50 hidden md:block"></div>

                <div class="space-y-4 font-mono text-xs md:text-sm">
                    
                    <div class="grid grid-cols-[85px_1fr] items-baseline border-b border-[#333] pb-2 gap-2">
                        <span class="text-gray-500">SUBJECT:</span>
                        <span class="text-white tracking-widest uppercase truncate">Intellectual Property</span>
                    </div>

                    <div class="grid grid-cols-[85px_1fr] items-baseline border-b border-[#333] pb-2 gap-2">
                        <span class="text-gray-500">STATUS:</span>
                        <span class="text-white uppercase truncate">Critical / Palliative</span>
                    </div>

                    <div class="grid grid-cols-[85px_1fr] items-baseline border-b border-[#333] pb-2 gap-2">
                        <span class="text-gray-500">PATHOLOGY:</span>
                        <span class="text-white uppercase glitch-text truncate">Hyper-Reproduction</span>
                    </div>

                    <div class="grid grid-cols-[85px_1fr] items-baseline gap-2">
                        <span class="text-gray-500">DATE:</span>
                        <span class="text-[var(--coca-red)] font-bold truncate">DECEMBER 10, 2028</span>
                    </div>
                </div>
                
                <!-- Signature -->
                <div class="mt-6 pt-4 border-t border-[#333] flex justify-between items-end">
                    <div class="w-3 h-3 border border-[var(--coca-red)] rounded-full animate-pulse-slow"></div>
                    <p class="text-[9px] text-gray-600 uppercase tracking-widest text-right">Authorized by The Church of Conceptual Art</p>
                </div>
            </div>

        </main>

        <!-- FOOTER -->
        <footer class="flex flex-col md:flex-row justify-between items-end md:items-end border-t border-[#333] pt-4 md:border-t-0 md:pt-0 gap-4 shrink-0">
            <div class="text-[10px] text-gray-600 max-w-[250px] leading-relaxed text-left">
                Please refrain from sending flowers.<br>Send data instead.
            </div>
            <div class="text-right w-full md:w-auto">
                <p class="text-[10px] text-gray-600 mb-1 uppercase tracking-wider">Time Remaining</p>
                <p id="countdown" class="font-mono text-lg md:text-xl text-gray-400 tabular-nums">CALCULATING...</p>
            </div>
        </footer>

    </div>

    <!-- LOGIC -->
    <script>
        // --- COUNTDOWN ---
        const targetDate = new Date("Dec 10, 2028 00:00:00").getTime();
        
        setInterval(() => {
            const now = new Date().getTime();
            const diff = targetDate - now;
            
            if (diff < 0) {
                document.getElementById("countdown").innerText = "0000d 00h 00m";
                return;
            }

            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            document.getElementById("countdown").innerText = `${d}d ${h}h ${m}m`;
        }, 1000);

        // --- WEBGL BACKGROUND ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);
        const renderer = new THREE.WebGLRenderer({ alpha: true });
        
        // Strict sizing to window only - ignoring scroll height
        function resize() {
            const width = window.innerWidth;
            const height = window.innerHeight; // Do NOT use scrollHeight here
            renderer.setSize(width, height);
            if(uniforms) uniforms.u_resolution.value.set(width, height);
        }
        
        container.appendChild(renderer.domElement);

        const uniforms = {
            u_time: { value: 0 },
            u_resolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) }
        };

        const material = new THREE.ShaderMaterial({
            uniforms: uniforms,
            fragmentShader: `
                uniform float u_time;
                uniform vec2 u_resolution;

                void main() {
                    vec2 st = gl_FragCoord.xy / u_resolution.xy;
                    st.x *= u_resolution.x / u_resolution.y;

                    // MoirÃ© Pattern Logic
                    float scale = 25.0; 
                    
                    float pattern1 = sin(st.x * scale + u_time * 0.15) + cos(st.y * scale);
                    
                    float angle = 0.15;
                    vec2 rotSt = vec2(st.x * cos(angle) - st.y * sin(angle), st.x * sin(angle) + st.y * cos(angle));
                    float pattern2 = sin(rotSt.x * (scale + 2.0) - u_time * 0.1) + cos(rotSt.y * (scale + 2.0));

                    float interference = pattern1 * pattern2;
                    
                    float intensity = smoothstep(0.2, 0.8, interference);
                    vec3 color = vec3(intensity * 0.12);

                    gl_FragColor = vec4(color, 1.0);
                }
            `,
            vertexShader: `
                void main() {
                    gl_Position = vec4(position, 1.0);
                }
            `
        });

        const plane = new THREE.Mesh(new THREE.PlaneGeometry(2, 2), material);
        scene.add(plane);

        window.addEventListener('resize', resize);
        resize(); // Call once on load

        function animate(time) {
            requestAnimationFrame(animate);
            uniforms.u_time.value = time * 0.001;
            renderer.render(scene, camera);
        }
        animate(0);

    </script>
</body>
</html>
